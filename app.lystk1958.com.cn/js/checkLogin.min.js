(function(b){var a=b.ajax;b.ajax=function(c){var e={success:function(f,g){},error:function(f,g){}};if(c.success){e.success=c.success;e.error=c.error}var d=b.extend(c,{error:function(f,h,g){e.error(f,h,g)},success:function(h,j,i){e.success(h,j,i);try{if(i!=null){var f=jQuery.parseJSON(i.responseText);if(f.code==-23&&b(".formDialog").attr("_class")!="loginWindow"){removeIng();buildLoginWindow("http://"+f.domain)}}}catch(g){}}});a(d)};buildLoginWindow=function(c){c=c+"/loginFormNew.jsp?f="+encodeUrl(top.window.location.href)+"&rqDomain="+encodeUrl(top.document.domain);popupWindow({title:"鐧诲綍",frameSrcUrl:c+"&track=2&ram="+Math.random(),width:"380",height:"175",frameScrolling:"no"})};popupWindow=function(g){var v={title:"",width:500,height:300,frameSrcUrl:"about:_blank",frameScrolling:"auto",bannerDisplay:true,framePadding:true,opacity:"0.3",displayBg:true,bgClose:false,closeBtnClass:"",waitingPHide:true};v=b.extend(v,g);var r=parseInt(v.width),u=parseInt(v.height);var h=top.document.documentElement.clientWidth;if(!b.browser.msie){h=top.document.body.clientWidth}var m=top.document.documentElement.clientHeight;var j=(h-r)/2;if(v.leftMar!=null){j=parseInt(v.leftMar)}var z=80;if(!v.bannerDisplay){z=0}var p=(m-u-z)/2;if(v.topMar!=null){p=parseInt(v.topMar)}var w="",y="",i="";if(!v.bannerDisplay){y="display:none;";w="background:none;";if(!v.closeBtnClass){v.closeBtnClass="formX_old"}}if(!v.framePadding){w+="padding:0;";i='allowtransparency="true"'}var q=parseInt(Math.random()*10000),f="<iframe "+i+" id='popupWindowIframe"+q+"' class='popupWindowIframe' src='' frameborder='0' scrolling='"+v.frameScrolling+"' style='width:100%;height:100%;'></iframe>",s=true;if(v.divId!=null){s=false;f=b(v.divId).html()}if(v.divContent!=null){s=false;f=v.divContent}if(v.displayBg){bg(q,v.opacity)}var o="";var e=top.$("body").scrollTop();if(e==0){e=top.$("html").scrollTop()}var t="left:"+j+"px; top:"+(p+e)+"px;";var d="position:relative;width:"+r+"px;height:"+u+"px;",c="";if(b.browser.msie){c='<iframe id="fixFlashIframe'+q+'" style="position:absolute;z-index:-1;left:0;top:0;" frameborder="0" width="100%" height="100%" src="javascript:"></iframe>'}var o=['<div id="popupWindow'+q+'" _class="loginWindow" class="formDialog" style="'+t+'">',c,'<div class="formTL" style=\'height:28px; background:#ffffc4;'+y+"'><div class=\"formTR\" style='background:none; height:28px;'><div class=\"formTC\" style='background:none; padding-top:0px; line-height:28px; height:28px; color:#ED0202; text-align:center; font-weight:normal;'>鐧诲綍瓒呮椂锛岃閲嶆柊鐧诲綍</div></div></div>",'<div class="formBL" style=\'background:#fff; '+w+"'>",'<div class="formBR" style=\'background:none; '+w+"'>",'<div class="formBC" id="formBC'+q+'" style="background:none; height:auto;'+w+'">','<div class="formMSG" style="'+d+'">',f,"</div>","<table cellpadding='0' cellspacing='0' class='formBtns'>","<tr><td align='center' style='padding:15px 0px;'></td></tr>","</table>","</div>",'<div id="waitingP'+q+'" class="waitingP" style="height:auto;"></div>',"</div>","</div>",'<a href="javascript:;" style=\'position: absolute; outline:none; cursor:pointer; top:11px; right:6px; width:15px; height:15px; background: url(http://ps.aaadns.com.wy.dev.cc/image/formCancle.png?v=201204251113) no-repeat\' class="formCancle '+v.closeBtnClass+"\" hidefocus='true' onclick='return false;'></a>","</div>"];var n=top.$(o.join("")).appendTo("body");var x=40;var k=20;if(!v.bannerDisplay){x=0}if(n.height()+x>(m-k)){var l=n.height()+x-n.find(".formMSG").height();n.find(".formMSG").css("height",(m-k-l)+"px");n.css("top",(10+e)+"px")}if(s){top.$("#waitingP"+q).height(top.$("#formBC"+q).height()).width(top.$("#formBC"+q).width())}else{if(v.waitingPHide){top.$("#waitingP"+q).hide()}}if(v.divInit!=null){v.divInit(q)}top.$("#popupWindow"+q).ready(function(){if(s){var A="popupID="+q;top.$("#popupWindowIframe"+q).attr("src",addUrlParams(v.frameSrcUrl,A)).load(function(){if(v.waitingPHide){top.$("#waitingP"+q).hide()}})}n.draggable({start:function(){top.$("body").disableSelection();top.$("#colorpanel").remove();top.$(".faiColorPicker").remove()},handle:".formTL",stop:function(){top.$("body").enableSelection()}});n.find(".formCancle").bind("click",function(){if(isNull(g.msg)){closePopupWindow(q)}else{closePopupWindow(q,undefined,g.msg)}return false});n.find(".formTL").disableSelection();if(v.bgClose){top.$("#popupBg"+q).bind("click",function(){if(isNull(g.msg)){closePopupWindow(q)}else{closePopupWindow(q,undefined,g.msg)}return false})}});if(isNull(top._popupOptions)){top._popupOptions={}}if(isNull(top._popupOptions["popup"+q])){top._popupOptions["popup"+q]={}}if(!isNull(g.callArgs)){top._popupOptions["popup"+q].callArgs=g.callArgs}top._popupOptions["popup"+q].options=g;top._popupOptions["popup"+q].change=false;return q};closePopupWindow=function(i,f,h){if(i){try{if(isNull(top._popupOptions["popup"+i])){return}var e=top._popupOptions["popup"+i];if(e.change){if(typeof(h)=="undefined"){if(!window.confirm("鎮ㄧ殑淇敼灏氭湭淇濆瓨锛岀‘瀹氳绂诲紑鍚楋紵")){return}}else{if(!window.confirm(h)){return}}}if(e.refresh){top.location.reload();return}removeAllIng(false);var d=e.options;if(!isNull(d.closeFunc)){if(f){d.closeFunc(f)}else{d.closeFunc(top._popupOptions["popup"+i].closeArgs)}}top._popupOptions["popup"+i]={};var c=top.$("#popupWindow"+i);if(d.animate){closePopupWindowAnimate(c,d.animateTarget,d.animateOnClose)}setTimeout("closePopupWindow_Internal('"+i+"')")}catch(g){}}else{removeBg();top.$(".formDialog").remove()}};closePopupWindow_Internal=function(f){if(typeof f=="undefined"){if(b.browser.msie&&b.browser.version==10){var c=top.$(".formDialog").find(".popupWindowIframe")[0];if(c){popupWindowIframeWindow=c.contentWindow;if(popupWindowIframeWindow){try{if(popupWindowIframeWindow.swfObj){popupWindowIframeWindow.swfObj.destroy()}if(popupWindowIframeWindow.editor){if(popupWindowIframeWindow.editor.swfObj){popupWindowIframeWindow.editor.swfObj.destroy()}}}catch(d){}}}}top.$(".popupBg").remove();top.$(".formDialog").remove()}else{if(b.browser.msie&&b.browser.version==10){var c=top.document.getElementById("popupWindowIframe"+f);if(c){popupWindowIframeWindow=c.contentWindow;if(popupWindowIframeWindow){try{if(popupWindowIframeWindow.swfObj){popupWindowIframeWindow.swfObj.destroy()}if(popupWindowIframeWindow.editor){if(popupWindowIframeWindow.editor.swfObj){popupWindowIframeWindow.editor.swfObj.destroy()}}}catch(d){}}}}removeBg(f);top.$("#popupWindowIframe"+f).remove();top.$("#popupWindow"+f).remove()}};closePopupWindowAnimate=function(d,g,f){var e=b("<div>");top.$("body").append(e);e.css({border:"1px solid #ff4400",position:"absolute","z-index":"9999",top:d.offset().top,left:d.offset().left,height:d.height()+"px",width:d.width()+"px"});var c=top.$("body").find(g);e.animate({top:c.offset().top+"px",left:c.offset().left+"px",width:c.width()+"px",height:c.height()+"px"},"slow",function(){if(typeof f=="function"){f()}e.remove()})};removeAllIng=function(){top.$("#ing").remove()};removeBg=function(c){if(c){top.$("#popupBg"+c).remove()}else{top.$(".popupBg").remove()}if(isIE8()){if(top.$("html").data("filter")){top.$("html").css("filter",top.$("html").data("filter"))}}};addUrlParams=function(c,d){if(isNull(d)){return c}if(c.indexOf("?")<0){return c+"?"+d}return c+"&"+d};removeIng=function(c,e,d){if(c){if(typeof e!="undefined"&&top.$("#"+e).length>0){top.window.setTimeout(function(){b("#"+e).fadeOut(1000)},(d?d:3000));top.window.setTimeout(function(){b("#"+e).remove()},(d?d+1500:4500))}else{top.$(".tips").fadeOut(1000);top.window.setTimeout(function(){b("#ing").remove()},(d?d:3000))}}else{if(typeof e!="undefined"&&top.$("#"+e).length>0){top.$("#"+e).fadeOut(500);top.window.setTimeout(function(){b("#"+e).remove()},1000)}else{top.$(".tips").fadeOut(500);top.window.setTimeout(function(){b("#ing").remove()},1000)}}top.$("#ing").css("opacity",0)};encodeUrl=function(c){return typeof c==="undefined"?"":encodeURIComponent(c)};isIE8=function(c){return BrowserType.MSIE8};BrowserType={UNKNOWN:0,SPIDER:1,CHROME:2,FIREFOX:3,MSIE8:4,MSIE7:5,MSIE6:6,MSIE9:7,SAFARI:8,MSIE10:9,MSIE11:10,OPERA:11,APPLE_WEBKIT:12};bg=function(f,d){var e="";var c="";if(d){c="filter: alpha(opacity="+d*100+"); opacity:"+d+";"}if(isIE8()){if(top.$("html").css("filter")){top.$("html").data("filter",top.$("html").css("filter"));top.$("html").css("filter","none")}}e='<div id="popupBg'+f+'" class="popupBg" style=\''+c+"' >"+(b.browser.msie&&b.browser.version==6?'<iframe id="fixSelectIframe'+f+'" wmode="transparent" style="filter: alpha(opacity=0);opacity: 0;" class="popupBg" style="z-index:-111" src="javascript:"></iframe>':"")+"</div>";top.$(e).appendTo("body")};isNull=function(c){return(typeof c=="undefined")||(c==null)}})(jQuery);
